"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7610],{7610:(M,_,u)=>{u.r(_),u.d(_,{CollectionsPageModule:()=>J});var m=u(6814),c=u(95),l=u(5548),g=u(1629),t=u(6689),f=u(2860);function p(e,s){1&e&&(t.TgZ(0,"ion-row")(1,"ion-col",11)(2,"ion-card"),t._UZ(3,"ion-skeleton-text",12),t.TgZ(4,"div",13)(5,"ion-button",14),t._uU(6," See Collection "),t.qZA()()()()()),2&e&&(t.xp6(3),t.Q6J("animated",!0))}const h=function(){return[1,2,3,4]};function C(e,s){1&e&&(t.TgZ(0,"ion-grid"),t.YNc(1,p,7,1,"ion-row",10),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",t.DdM(1,h)))}const b=function(e){return["/","collection",e]};function x(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"ion-row")(1,"ion-col",11)(2,"ion-card")(3,"ion-card-header")(4,"ion-card-title"),t._uU(5),t.qZA(),t.TgZ(6,"ion-card-subtitle"),t._uU(7),t.qZA()(),t.TgZ(8,"div",13)(9,"ion-button",15),t._uU(10," See Collection "),t.qZA()(),t.TgZ(11,"div",16)(12,"ion-button",17),t.NdJ("click",function(){const r=t.CHM(i).$implicit,a=t.oxw(2);return t.KtG(a.onDeleteCollection(null==r?null:r.id))}),t._UZ(13,"ion-icon",18),t.qZA()()()()()}if(2&e){const i=s.$implicit,o=t.oxw(2);t.xp6(5),t.hij(" ",null==i?null:i.name," "),t.xp6(2),t.hij(" Contains ",null==i?null:i.numberOfItems," Items. "),t.xp6(2),t.Q6J("disabled",o.disableActions)("routerLink",t.VKq(5,b,i.id)),t.xp6(3),t.Q6J("disabled",o.disableActions)}}function Z(e,s){if(1&e&&(t.TgZ(0,"ion-grid"),t.YNc(1,x,14,7,"ion-row",10),t.qZA()),2&e){const i=t.oxw();t.xp6(1),t.Q6J("ngForOf",i.collections)}}function P(e,s){1&e&&(t.TgZ(0,"ion-grid")(1,"ion-row")(2,"ion-col",11)(3,"div",13),t._uU(4," Looks like you have no collections yet.. Let's change that! "),t.qZA()()()())}function T(e,s){1&e&&(t.TgZ(0,"fieldset",29),t._UZ(1,"ion-input",30),t.qZA()),2&e&&(t.Q6J("formGroupName",s.index),t.xp6(1),t.Q6J("clearInput",!0)("required",!0))}function v(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"ion-button",28),t.NdJ("click",function(){t.CHM(i);const n=t.oxw().index,r=t.oxw(2);return t.KtG(r.remove(n))}),t._uU(1," Remove "),t.qZA()}}function A(e,s){if(1&e&&(t.TgZ(0,"fieldset",29),t._UZ(1,"ion-input",31),t.TgZ(2,"div",13),t.YNc(3,v,2,0,"ion-button",32),t.qZA()()),2&e){const i=s.index;t.Q6J("formGroupName",i),t.xp6(1),t.Q6J("label","Attribute "+(i+1))("clearInput",!0)("required",!0),t.xp6(2),t.Q6J("ngIf",0!==i)}}function y(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",19),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.cancel())}),t._uU(4,"Cancel"),t.qZA()(),t.TgZ(5,"ion-title"),t._uU(6,"New Collection!"),t.qZA(),t.TgZ(7,"ion-buttons",20)(8,"ion-button",21),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.confirm())}),t._uU(9,"Confirm"),t.qZA()()()(),t.TgZ(10,"ion-content",22)(11,"form",23),t.ynx(12,24),t.YNc(13,T,2,3,"fieldset",25),t.BQk(),t.ynx(14,26),t.YNc(15,A,4,5,"fieldset",25),t.BQk(),t.TgZ(16,"div",27)(17,"ion-button",28),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.add())}),t._uU(18,"Add Attribute"),t.qZA()()()()}if(2&e){const i=t.oxw();t.xp6(8),t.Q6J("disabled",!i.form.valid||i.disableActions)("strong",!0),t.xp6(3),t.Q6J("formGroup",i.form),t.xp6(2),t.Q6J("ngForOf",i.collectionNameControl.controls),t.xp6(2),t.Q6J("ngForOf",i.attributesControl.controls)}}const N=[{path:"",component:(()=>{var e;class s{constructor(o,n,r,a,d){this.collectionsService=o,this.actionSheetCtrl=n,this.loadingCtrl=r,this.toastCtrl=a,this.formBuilder=d,this.collections=[],this.loadingCollections=!1,this.attributes=[{name:""}],this.disableActions=!1,this._subscriptions=[],this.form=this.formBuilder.group({collectionName:this.formBuilder.array([this.formBuilder.group({name:[null,{updateOn:"change",validators:[c.kI.required]}]})]),attributes:this.formBuilder.array([])})}ngOnInit(){this._subscriptions.push(this.collectionsService.collections.subscribe(o=>{this.collections=o})),this.attributes.forEach(o=>this.attributesControl.push(this.formBuilder.group({name:[o.name,{updateOn:"change",validators:[c.kI.required]}]})))}get attributesControl(){return this.form.get("attributes")}get collectionNameControl(){return this.form.get("collectionName")}ionViewWillEnter(){this.loadingCollections=!0,this.collectionsService.fetchCollections().subscribe(()=>{this.loadingCollections=!1})}onAddClicked(){}onDeleteCollection(o){this.disableActions=!0,this.actionSheetCtrl.create({header:"Are you sure you want to delete this Collection? Everything in it will be deleted",buttons:[{text:"Delete",role:"destructive",handler:()=>{this.loadingCtrl.create({message:"Deleting Item..."}).then(n=>{this.loadingCollections=!0,n.present(),this.collections=[],this.collectionsService.deleteCollection(o).subscribe(r=>{n.dismiss(),this.toastCtrl.create({message:"Removed Successfully!",duration:1500,position:"bottom",icon:"checkmark-circle-outline",color:"success"}).then(a=>{a.present(),this.loadingCollections=!1})})})}},{text:"Cancel",role:"cancel"}]}).then(n=>{n.present(),this.disableActions=!1})}add(){this.attributesControl.push(this.formBuilder.group({name:[null,{updateOn:"change",validators:[c.kI.required]}]}))}remove(o){this.attributesControl.removeAt(o)}cancel(){this.modal.dismiss(null,"cancel")}confirm(){const o=[];this.form.value.attributes.forEach(r=>{o.push(r.name)});const n={name:this.form.value.collectionName[0].name,attributes:o,items:[],numberOfItems:0};this.loadingCtrl.create({message:"Creating your new collection..."}).then(r=>{r.present(),this.collectionsService.addCollection(n).subscribe(a=>{a?this.toastCtrl.create({message:"Collection Created Successfully!",duration:1500,position:"bottom",icon:"checkmark-circle-outline",color:"success"}).then(d=>{d.present(),this.modal.dismiss(null,"confirm"),r.dismiss(),this.form.reset(),this.form=this.formBuilder.group({collectionName:this.formBuilder.array([this.formBuilder.group({name:[null,{updateOn:"change",validators:[c.kI.required]}]})]),attributes:this.formBuilder.array([])}),this.attributes=[{name:""}],this.attributes.forEach(w=>this.attributesControl.push(this.formBuilder.group({name:[w.name,{updateOn:"change",validators:[c.kI.required]}]})))}):(r.dismiss(),this.toastCtrl.create({message:"Cold not add item!",duration:1500,position:"bottom",icon:"close-circle-outline",color:"danger"}).then(d=>{d.present()}))})})}onWillDismiss(o){}ngOnDestroy(){this._subscriptions.forEach(o=>o.unsubscribe())}}return(e=s).\u0275fac=function(o){return new(o||e)(t.Y36(f.c),t.Y36(l.BX),t.Y36(l.HT),t.Y36(l.yF),t.Y36(c.qu))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-collections"]],viewQuery:function(o,n){if(1&o&&t.Gf(l.ki,5),2&o){let r;t.iGM(r=t.CRH())&&(n.modal=r.first)}},decls:19,vars:6,consts:[[3,"translucent"],["slot","start"],["slot","primary"],["id","open-modal",3,"disabled","click"],["name","add-outline","slot","icon-only"],[3,"fullscreen"],["collapse","condense"],["size","small"],[4,"ngIf"],["trigger","open-modal",3,"willDismiss"],[4,"ngFor","ngForOf"],["size-sm","6","offset-sm","3"],[2,"height","80px",3,"animated"],[1,"ion-text-center"],["fill","clear","color","medium"],["fill","clear","color","primary",3,"disabled","routerLink"],[1,"ion-text-center","delete-btn"],["fill","clear","color","danger","size","small",3,"disabled","click"],["slot","icon-only","name","trash-outline"],[3,"click"],["slot","end"],[3,"disabled","strong","click"],[1,"ion-padding"],[3,"formGroup"],["formArrayName","collectionName"],["style","border: none",3,"formGroupName",4,"ngFor","ngForOf"],["formArrayName","attributes"],[1,"ion-text-end"],["size","small",3,"click"],[2,"border","none",3,"formGroupName"],["type","text","label","Collection Name","formControlName","name","placeholder","Collection Name","errorText","Required",3,"clearInput","required"],["type","text","formControlName","name","placeholder","Attribute Name","errorText","Required",3,"label","clearInput","required"],["size","small",3,"click",4,"ngIf"]],template:function(o,n){1&o&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),t._UZ(3,"ion-menu-button"),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"My Collections"),t.qZA(),t.TgZ(6,"ion-buttons",2)(7,"ion-button",3),t.NdJ("click",function(){return n.onAddClicked()}),t._UZ(8,"ion-icon",4),t.qZA()()()(),t.TgZ(9,"ion-content",5)(10,"ion-header",6)(11,"ion-toolbar")(12,"ion-title",7),t._uU(13,"My Collections"),t.qZA()()(),t.YNc(14,C,2,2,"ion-grid",8),t.YNc(15,Z,2,1,"ion-grid",8),t.YNc(16,P,5,0,"ion-grid",8),t.TgZ(17,"ion-modal",9),t.NdJ("willDismiss",function(a){return n.onWillDismiss(a)}),t.YNc(18,y,19,5,"ng-template"),t.qZA()()),2&o&&(t.Q6J("translucent",!0),t.xp6(7),t.Q6J("disabled",n.disableActions),t.xp6(2),t.Q6J("fullscreen",!0),t.xp6(5),t.Q6J("ngIf",n.loadingCollections),t.xp6(1),t.Q6J("ngIf",n.collections.length>0&&!n.loadingCollections),t.xp6(1),t.Q6J("ngIf",n.collections.length<=0&&!n.loadingCollections))},dependencies:[m.sg,m.O5,c._Y,c.JJ,c.JL,c.Q7,l.YG,l.Sm,l.PM,l.Zi,l.tO,l.Dq,l.wI,l.W2,l.jY,l.Gu,l.gu,l.pK,l.fG,l.Nd,l.CK,l.wd,l.sr,l.ki,l.j9,l.YI,g.rH,c.sg,c.u,c.x0,c.CE],styles:["[_nghost-%COMP%]   ion-title[_ngcontent-%COMP%]{font-weight:700}[_nghost-%COMP%]   ion-title[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:14px;opacity:.7}[_nghost-%COMP%]   ion-title.title-md[_ngcontent-%COMP%]{height:auto;margin-top:15px;margin-bottom:15px}[_nghost-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{padding-right:30px}[_nghost-%COMP%]   .delete-btn[_ngcontent-%COMP%]{width:min-content;position:absolute;top:3px;right:0}"]}),s})()}];let k=(()=>{var e;class s{}return(e=s).\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[g.Bz.forChild(N),g.Bz]}),s})(),J=(()=>{var e;class s{}return(e=s).\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.ez,c.u5,l.Pc,k,c.UX]}),s})()}}]);